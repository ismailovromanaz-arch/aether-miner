<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Aether Miner</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<meta name="viewport"
content="width=device-width, initial-scale=1.0">

<style>

/* GLOBAL */

*{
-webkit-tap-highlight-color: transparent;
}

body{
margin:0;
font-family:Arial;
background:radial-gradient(circle,#070718,#000);
color:#aefcff;
overflow:hidden;
text-align:center;
}

/* HUD */

.hud{
display:flex;
align-items:center;
gap:10px;
padding:15px;
}

.avatar{
width:45px;
height:45px;
border-radius:50%;
border:2px solid #00f0ff;
box-shadow:0 0 15px #00f0ff;
}

/* PLANET */

.planet-wrap{
position:relative;
width:240px;
height:240px;
margin:20px auto;
cursor:pointer;
}

/* PLANET */

.planet{
width:100%;
height:100%;
border-radius:50%;

background:
radial-gradient(circle at 30% 30%,
#00f0ff,
#9d4dff,
#050510);

box-shadow:
0 0 60px #00f0ff,
0 0 120px #9d4dff,
inset 0 0 60px #00f0ff;

animation:rotatePlanet 20s linear infinite;
}

/* GLOW RING */

.ring{
position:absolute;
width:120%;
height:120%;
top:-10%;
left:-10%;
border-radius:50%;
border:2px solid #00f0ff;
box-shadow:0 0 40px #00f0ff;
animation:spin 12s linear infinite;
}

/* PARTICLES */

.particle{
position:absolute;
width:6px;
height:6px;
background:#00f0ff;
border-radius:50%;
box-shadow:0 0 10px #00f0ff;
animation:float 4s infinite;
}

/* FLOAT TEXT */

.float{
position:absolute;
color:#00f0ff;
font-weight:bold;
animation:floatUp 1s forwards;
}

/* ENERGY */

.bar{
width:90%;
height:20px;
margin:20px auto;
border-radius:12px;
overflow:hidden;
border:1px solid #00f0ff;
box-shadow:0 0 15px #00f0ff;
}

.fill{
height:100%;
background:linear-gradient(
90deg,#00f0ff,#9d4dff);
width:100%;
}

/* BUTTON */

button{
width:90%;
padding:16px;
border:none;
border-radius:16px;
background:linear-gradient(
90deg,#9d4dff,#ff2bd6);
color:white;
box-shadow:0 0 25px #9d4dff;
}

/* NAVBAR */

.navbar{
position:fixed;
bottom:0;
width:100%;
height:80px;
background:#070712;
display:flex;
justify-content:space-around;
align-items:center;
}

/* ANIMATIONS */

@keyframes spin{
from{transform:rotate(0)}
to{transform:rotate(360deg)}
}

@keyframes rotatePlanet{
from{transform:rotate(0)}
to{transform:rotate(360deg)}
}

@keyframes float{
0%{transform:translateY(0)}
50%{transform:translateY(-20px)}
100%{transform:translateY(0)}
}

@keyframes floatUp{
to{
opacity:0;
transform:translateY(-60px);
}
}

/* SHAKE */

.shake{
animation:shake .3s;
}

@keyframes shake{
0%{transform:translate(0)}
25%{transform:translate(3px,-3px)}
50%{transform:translate(-3px,3px)}
75%{transform:translate(3px,3px)}
100%{transform:translate(0)}
}

</style>
</head>

<body>

<!-- HUD -->

<div class="hud">

<img id="avatar"
class="avatar">

<div id="welcome">
Welcome
</div>

</div>

<!-- PLANET -->

<div class="planet-wrap"
onclick="mine(event)">

<div class="ring"></div>
<div class="planet"></div>

</div>

<h3>
Fragments:
<span id="af">0</span>
/ 5 000
</h3>

<h3>
Aether:
<span id="aeth">0</span>
</h3>

<div class="bar">
<div class="fill"
id="energyBar"></div>
</div>

<p>
Energy:
<span id="energy">100</span>
/100
</p>

<button onclick="convert()">
Convert 10K AF â†’ 1 AETH
</button>

<div class="navbar">
<div>Miner</div>
<div>Convert</div>
</div>

<!-- SOUND -->

<audio id="tapSound"
src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3">
</audio>

<script>

/* TELEGRAM */

const tg=window.Telegram.WebApp;
tg.expand();

let user=tg.initDataUnsafe?.user;

if(user){

welcome.innerText=
"Welcome, "+user.first_name;

avatar.src=
user.photo_url ||
"https://i.imgur.com/6VBx3io.png";
}

/* SAVE */

let af=
parseInt(localStorage.getItem("af"))||0;

let aeth=
parseInt(localStorage.getItem("aeth"))||0;

let energy=
parseInt(localStorage.getItem("energy"))||100;

const maxEnergy=100;

/* TAP */

function mine(e){

if(energy<=0)return;

af++;
energy--;

floatText(e);
shake();
sound();

save();
updateUI();
}

/* FLOAT */

function floatText(e){

const el=document.createElement("div");

el.className="float";
el.innerText="+1";

el.style.left=e.clientX+"px";
el.style.top=e.clientY+"px";

document.body.appendChild(el);

setTimeout(()=>el.remove(),1000);
}

/* SHAKE */

function shake(){

document.body.classList.add("shake");

setTimeout(()=>{
document.body.classList.remove("shake");
},300);
}

/* SOUND */

function sound(){

tapSound.currentTime=0;
tapSound.play();
}

/* CONVERT */

function convert(){

if(af<10000)return;

aeth++;
af-=10000;

save();
updateUI();
}

/* ENERGY REGEN */

setInterval(()=>{

if(energy<maxEnergy){
energy++;
save();
updateUI();
}

},3000);

/* SAVE */

function save(){

localStorage.setItem("af",af);
localStorage.setItem("aeth",aeth);
localStorage.setItem("energy",energy);
}

/* UI */

function updateUI(){

afEl.innerText=af;
aethEl.innerText=aeth;
energyEl.innerText=energy;

energyBar.style.width=
(energy/maxEnergy*100)+"%";
}

/* DOM */

const afEl=document.getElementById("af");
const aethEl=document.getElementById("aeth");
const energyEl=document.getElementById("energy");
const energyBar=document.getElementById("energyBar");

updateUI();

/* PARTICLES */

setInterval(()=>{

const p=document.createElement("div");
p.className="particle";

p.style.left=
Math.random()*100+"%";

p.style.top="60%";

document.body.appendChild(p);

setTimeout(()=>p.remove(),4000);

},500);

</script>

</body>
</html>
