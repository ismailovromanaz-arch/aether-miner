<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Aether Miner</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<meta name="viewport"
content="width=device-width, initial-scale=1.0">

<style>

/* ===== GLOBAL ===== */

*{
-webkit-tap-highlight-color: transparent;
}

body{
margin:0;
font-family:Arial;
background:radial-gradient(circle,#070718,#000);
color:#aefcff;
overflow:hidden;
user-select:none;
}

/* ===== SCREEN ===== */

.screen{
height:calc(100vh - 80px);
padding:20px;
text-align:center;
}

/* ===== CORE REACTOR ===== */

.core{
width:170px;
height:170px;
margin:50px auto;
border-radius:50%;
cursor:pointer;
position:relative;

background:
radial-gradient(circle,
#00f0ff 0%,
#9d4dff 40%,
#050510 70%);

box-shadow:
0 0 40px #00f0ff,
0 0 80px #9d4dff,
inset 0 0 40px #00f0ff;

animation:pulseCore 2s infinite;
}

/* Inner glow */

.core::before{
content:"";
position:absolute;
width:70%;
height:70%;
border-radius:50%;
top:15%;
left:15%;

background:
radial-gradient(circle,
#ffffff,
#00f0ff);

opacity:.25;
}

/* Pulse */

@keyframes pulseCore{
0%{transform:scale(1)}
50%{transform:scale(1.08)}
100%{transform:scale(1)}
}

/* Tap press */

.core:active{
transform:scale(.9);
box-shadow:
0 0 60px #00f0ff,
0 0 100px #9d4dff;
}

/* ===== FLOAT TEXT ===== */

.float{
position:absolute;
color:#00f0ff;
font-weight:bold;
animation:floatUp 1s forwards;
pointer-events:none;
}

@keyframes floatUp{
from{
opacity:1;
transform:translateY(0);
}
to{
opacity:0;
transform:translateY(-60px);
}
}

/* ===== WAVE ===== */

.wave{
position:absolute;
width:170px;
height:170px;
border-radius:50%;
border:2px solid #00f0ff;
animation:wave 0.6s forwards;
pointer-events:none;
}

@keyframes wave{
from{
opacity:1;
transform:scale(1);
}
to{
opacity:0;
transform:scale(2);
}
}

/* ===== ENERGY ===== */

.bar{
width:90%;
height:20px;
margin:20px auto;
border-radius:12px;
overflow:hidden;
border:1px solid #00f0ff;
}

.fill{
height:100%;
background:linear-gradient(
90deg,#00f0ff,#9d4dff);
width:100%;
transition:.3s;
}

/* ===== BUTTON ===== */

button{
width:90%;
padding:15px;
font-size:16px;
border:none;
border-radius:14px;
background:linear-gradient(
90deg,#9d4dff,#ff2bd6);
color:white;
box-shadow:0 0 20px #9d4dff;
}

/* ===== NAVBAR ===== */

.navbar{
position:fixed;
bottom:0;
width:100%;
height:80px;
background:#070712;
display:flex;
justify-content:space-around;
align-items:center;
border-top:1px solid #15152a;
}

.tab{
text-align:center;
color:#666;
font-size:12px;
}

.tab.active{
color:#00f0ff;
}

</style>
</head>

<body>

<div class="screen">

<h2 id="welcome">
Aether Miner
</h2>

<!-- CORE -->
<div class="core"
onclick="mine(event)">
</div>

<h3>
Fragments:
<span id="af">0</span>
/ 5 000
</h3>

<h3>
Aether:
<span id="aeth">0</span>
</h3>

<div class="bar">
<div class="fill"
id="energyBar"></div>
</div>

<p>
Energy:
<span id="energy">100</span>
/100
</p>

<button onclick="convert()">
Convert 10K AF â†’ 1 AETH
</button>

</div>

<!-- NAVBAR -->

<div class="navbar">

<div class="tab active">
Miner
</div>

<div class="tab">
Convert
</div>

</div>

<script>

/* ===== TELEGRAM USER ===== */

const tg =
window.Telegram.WebApp;

tg.expand();

let user =
tg.initDataUnsafe?.user;

if(user){
document.getElementById(
"welcome").innerText=
"Welcome, "+
user.first_name;
}

/* ===== LOAD SAVE ===== */

let af =
parseInt(localStorage
.getItem("af"))||0;

let aeth =
parseInt(localStorage
.getItem("aeth"))||0;

let energy =
parseInt(localStorage
.getItem("energy"))||100;

const maxEnergy=100;
const dailyLimit=5000;

/* ===== TAP ===== */

function mine(e){

if(energy<=0)return;
if(af>=dailyLimit)return;

af++;
energy--;

floatText(e);
waveEffect(e);

save();
updateUI();
}

/* FLOAT +1 */

function floatText(e){

const el=
document.createElement("div");

el.className="float";
el.innerText="+1 AF";

el.style.left=
e.clientX+"px";

el.style.top=
e.clientY+"px";

document.body.appendChild(el);

setTimeout(()=>el.remove(),1000);
}

/* WAVE */

function waveEffect(e){

const wave=
document.createElement("div");

wave.className="wave";

wave.style.left=
(e.clientX-85)+"px";

wave.style.top=
(e.clientY-85)+"px";

document.body.appendChild(wave);

setTimeout(()=>wave.remove(),600);
}

/* ===== CONVERT ===== */

function convert(){

if(af<10000){
alert("Need 10K AF");
return;
}

let c=
Math.floor(af/10000);

aeth+=c;
af-=c*10000;

save();
updateUI();
}

/* ===== ENERGY REGEN ===== */

setInterval(()=>{

if(energy<maxEnergy){
energy++;
save();
updateUI();
}

},3000);

/* ===== SAVE ===== */

function save(){

localStorage
.setItem("af",af);

localStorage
.setItem("aeth",aeth);

localStorage
.setItem("energy",energy);
}

/* ===== UI ===== */

function updateUI(){

afEl.innerText=af;
aethEl.innerText=aeth;
energyEl.innerText=energy;

energyBar.style.width=
(energy/maxEnergy*100)+"%";
}

/* DOM */

const afEl=
document.getElementById("af");

const aethEl=
document.getElementById("aeth");

const energyEl=
document.getElementById("energy");

const energyBar=
document.getElementById("energyBar");

updateUI();

</script>

</body>
</html>
