<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Aether Miner</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<meta name="viewport"
content="width=device-width, initial-scale=1.0">

<style>

/* ===== BODY ===== */

body{
margin:0;
font-family:Arial;
background:radial-gradient(circle,#070718,#000);
color:#aefcff;
overflow:hidden;
user-select:none;
}

/* ===== SCREENS ===== */

.screen{
display:none;
height:calc(100vh - 80px);
padding:20px;
text-align:center;
}

.active{display:block}

/* ===== CORE ===== */

.core{
font-size:120px;
margin-top:40px;
cursor:pointer;
filter:drop-shadow(0 0 25px #00f0ff);
animation:pulse 2s infinite;
transition:.1s;
}

@keyframes pulse{
0%{filter:drop-shadow(0 0 10px #00f0ff)}
50%{filter:drop-shadow(0 0 30px #9d4dff)}
100%{filter:drop-shadow(0 0 10px #00f0ff)}
}

.core:active{
transform:scale(.85);
}

/* FLOAT TEXT */

.float{
position:absolute;
color:#00f0ff;
animation:floatUp 1s forwards;
}

@keyframes floatUp{
from{opacity:1;transform:translateY(0)}
to{opacity:0;transform:translateY(-60px)}
}

/* ENERGY */

.bar{
width:90%;
height:20px;
margin:20px auto;
border-radius:12px;
overflow:hidden;
border:1px solid #00f0ff;
}

.fill{
height:100%;
background:linear-gradient(
90deg,#00f0ff,#9d4dff);
width:100%;
transition:.3s;
}

/* BUTTON */

button{
width:90%;
padding:15px;
font-size:16px;
border:none;
border-radius:14px;
background:linear-gradient(
90deg,#9d4dff,#ff2bd6);
color:white;
box-shadow:0 0 20px #9d4dff;
}

/* NAVBAR */

.navbar{
position:fixed;
bottom:0;
width:100%;
height:80px;
background:#070712;
display:flex;
justify-content:space-around;
align-items:center;
border-top:1px solid #15152a;
}

.tab{
text-align:center;
color:#666;
font-size:12px;
}

.tab.active{
color:#00f0ff;
}

</style>
</head>

<body>

<!-- ===== MINER ===== -->

<div id="miner"
class="screen active">

<h2 id="welcome">Aether Miner</h2>

<div class="core"
onclick="mine(event)">ðŸŒ€</div>

<h3>Fragments:
<span id="af">0</span>
/ 5 000</h3>

<h3>Aether:
<span id="aeth">0</span></h3>

<div class="bar">
<div class="fill"
id="energyBar"></div>
</div>

<p>Energy:
<span id="energy">100</span>
/100</p>

</div>

<!-- ===== CONVERT ===== -->

<div id="convert"
class="screen">

<h2>Convert</h2>

<button onclick="convert()">
Convert 10K AF â†’ 1 AETH
</button>

</div>

<!-- ===== NAVBAR ===== -->

<div class="navbar">

<div class="tab active"
onclick="openTab('miner',this)">
Miner
</div>

<div class="tab"
onclick="openTab('convert',this)">
Convert
</div>

</div>

<script>

/* ===== TELEGRAM USER ===== */

const tg = window.Telegram.WebApp;
tg.expand();

let user =
tg.initDataUnsafe?.user;

if(user){
document.getElementById(
"welcome").innerText =
"Welcome, "+user.first_name;
}

/* ===== SAVE LOAD ===== */

let af =
parseInt(localStorage
.getItem("af")) || 0;

let aeth =
parseInt(localStorage
.getItem("aeth")) || 0;

let energy =
parseInt(localStorage
.getItem("energy")) || 100;

const maxEnergy=100;
const dailyLimit=5000;

/* ===== TAP ===== */

function mine(e){

if(energy<=0)return;
if(af>=dailyLimit)return;

af++;
energy--;

floatText(e);
save();
updateUI();
}

/* FLOAT +1 */

function floatText(e){

const el =
document.createElement("div");

el.className="float";
el.innerText="+1 AF";

el.style.left =
e.clientX+"px";

el.style.top =
e.clientY+"px";

document.body.appendChild(el);

setTimeout(()=>el.remove(),1000);
}

/* ===== CONVERT ===== */

function convert(){

if(af<10000){
alert("Need 10K AF");
return;
}

let c =
Math.floor(af/10000);

aeth+=c;
af-=c*10000;

save();
updateUI();
}

/* ===== ENERGY REGEN ===== */

setInterval(()=>{

if(energy<maxEnergy){
energy++;
save();
updateUI();
}

},3000);

/* ===== SAVE ===== */

function save(){

localStorage
.setItem("af",af);

localStorage
.setItem("aeth",aeth);

localStorage
.setItem("energy",energy);
}

/* ===== UI ===== */

function updateUI(){

afEl.innerText=af;
aethEl.innerText=aeth;
energyEl.innerText=energy;

energyBar.style.width=
(energy/maxEnergy*100)+"%";
}

/* ===== TABS ===== */

function openTab(id,el){

document
.querySelectorAll(".screen")
.forEach(s=>s.classList
.remove("active"));

document
.getElementById(id)
.classList.add("active");

document
.querySelectorAll(".tab")
.forEach(t=>t.classList
.remove("active"));

el.classList.add("active");
}

/* DOM */

const afEl =
document.getElementById("af");
const aethEl =
document.getElementById("aeth");
const energyEl =
document.getElementById("energy");
const energyBar =
document.getElementById("energyBar");

updateUI();

</script>

</body>
</html>
